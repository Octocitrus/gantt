<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="gantt-step.html">
<link rel="import" href="svg-arrow.html">

<dom-module id="gantt-widget">

	<template strip-whitespace>
		<style>
			:host {
				display: block;
				height: [[height]];
				width: [[width]];
				background: #fff;
				overflow: hidden;
			}

			.timeline {
				overflow: hidden;
				position: relative;
			}

			.year,
			.month,
			.day {
				padding-left: 2px;
				text-overflow: ellipsis;
				white-space: nowrap;
		   	border-right: 1px solid #A9A9A9;
		    background-color: #d0d0d0;
		    box-sizing: border-box;
		    -moz-box-sizing: border-box;
		    -webkit-box-sizing: border-box;

			    &.spacer {
			    	padding-left: 0px;
			    }
			}
			.year.spacer,
			.month.spacer,
			.day.spacer {
				padding-left: 0px;
			}

			.month:nth-of-type(even),
			.day:nth-of-type(even) {
			    background-color: #ddd;
			}
			.col.even {
			    background-color: #ccc;
			}

			.col {
				position: [[colPosition]];
				left: [[colLeft]]px;
				height: 100%;
				float: left;
				overflow: hidden;
				border-right: 1px solid #A9A9A9;
				background-color: #ddd;
				font-size: 10px;
				text-align: center;
				box-sizing: border-box;
				-moz-box-sizing: border-box;
				-webkit-box-sizing: border-box;
				-webkit-touch-callout: none;
				//@include noUserSelect;
			}

			.c-col {
				width: [[colCenterWidth]];
			}

			.f-col {
				width: [[colFirstWidth]];
			}

			.l-col {
				width: [[colLastWidth]];
			}

			.col.w {
				text-align: left;
			}

			.col.weekend {
				background-color: #ccc;
			}

			.col.measure {
			    // Change min-width to adjust grid's cell width with day and hour-resolution.
				//min-width: 40px;
			}
			.col.w.measure {
				// Change min-width to adjust grid's cell width with week-resolution.
				//min-width: 70px;
			}

			.row {
				width: 100%;
				float: left;
				overflow: hidden;
				height: 15px;
				-ms-flex-pack: justify;
				-webkit-touch-callout: none;
				//@include noUserSelect;
			}
			.gantt-container {
				width: 100%;
				height: 100%;
				overflow: auto;
				//@include noUserSelect;
				//@include ganttBgGrid(#eee);
			}

			.gantt-content {
				background: transparent;
				overflow: hidden;
				position: relative;
				width:	100%;
				height: 100%;
			}

			.mv-el {
				position: absolute;
				top: 0;
				box-sizing: border-box;
				-moz-box-sizing: border-box;
				-webkit-box-sizing: border-box;
				height: 100%;
				z-index: 2;
				background: transparent;
				border-left: 1px dashed #ddd;
				border-right: 1px dashed #ddd;
			}

			/* Optional background svg element. */
			svg.bg-grid {
				position: absolute;
				overflow: hidden;
				top: 0;
				z-index: 0;
				background: transparent;
			}
			
		</style>

				<!-- >div class="timeline"></div-->
			<div id="ganttContainer" class="gantt-container" on-scroll="handleContainerScroll">
				<div id="ganttContent" class="gantt-content">
					<div class="mv-el" style="display: none;"></div>
				</div>
			</div>
			<div style="display: none;"></div>

	</template>

	<script>
		class GanttWidget extends Polymer.Element {
			static get is() { return 'gantt-widget'; }

			static get properties() {
				return {
						height: String,
						width: String,
						colLeft: {
							type: Number,
							value: 0,
						},
						colPosition: {
							type: String,
							value: "static",
						},
						colCenterWidth: {
							type: String,
							value: "auto",
						},
						colFirstWidth: {
							type: String,
							value: "auto",
						},
						colLastWidth: {
							type: String,
							value: "auto",
						}
				};
			}

			connectedCallback() {
				super.connectedCallback();
				this.readyAndConnected = true;
			}

			registerContainerScrollHandler(f) {
				this.containerScrollHandler = f;
			}
			handleContainerScroll(e) {
				if(this.containerScrollHandler) {
					this.containerScrollHandler(e);
				}
			}
		}
		customElements.define(GanttWidget.is, GanttWidget);
	</script>

</dom-module>
